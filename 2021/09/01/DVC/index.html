<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">



  <meta name="google-site-verification" content="googleabb0235d95708546.html">














  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Chiehpower.com">





  <link rel="alternate" href="/atom.xml" title="Chieh's Blog" type="application/atom+xml">






<meta property="og:type" content="article">
<meta property="og:title" content="DVC">
<meta property="og:url" content="https://chiehpower.com/2021/09/01/DVC/index.html">
<meta property="og:site_name" content="Chieh&#39;s Blog">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLVcZMv8Y84R_6NNJRIcWCzF7z2YUEpvOoCQFj0DoTFvjX9IuybBYmxUdOO1GBIASjsTEAOCLOJQtPS10_-pTo-Pj29cawiP4yXgPawhWgENfavuwe9WajbOJdk82xkMox-8h-8u8J3WN4byuzb9pq3lQw=w2038-h1530-no?authuser=3">
<meta property="og:updated_time" content="2021-09-22T01:15:27.512Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="DVC">
<meta name="twitter:image" content="https://lh3.googleusercontent.com/pw/AM-JKLVcZMv8Y84R_6NNJRIcWCzF7z2YUEpvOoCQFj0DoTFvjX9IuybBYmxUdOO1GBIASjsTEAOCLOJQtPS10_-pTo-Pj29cawiP4yXgPawhWgENfavuwe9WajbOJdk82xkMox-8h-8u8J3WN4byuzb9pq3lQw=w2038-h1530-no?authuser=3">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"hide","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://chiehpower.com/2021/09/01/DVC/">





  <title>DVC | Chieh's Blog</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-107521179-1', 'auto');
  ga('send', 'pageview');
</script>





</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Chieh's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">Life Record . 封面照都是自己拍的哦！</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-presentation">
          <a href="/presentation" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-file"></i> <br>
            
            Presentation
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>
            
            Sitemap
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://chiehpower.com/2021/09/01/DVC/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chieh">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar1.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chieh's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">DVC</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-09-01T16:31:21+00:00">
                2021-09-01
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2021/09/01/DVC/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2021/09/01/DVC/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>點擊數
            </span>
          

          

          
              <div class="post-description">
                  <center> </center>
              </div>
          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      
        <div class="post-gallery" itemscope="" itemtype="http://schema.org/ImageGallery">
          
          
            <div class="post-gallery-row">
              <a class="post-gallery-img fancybox" href="https://lh3.googleusercontent.com/pw/AM-JKLVcZMv8Y84R_6NNJRIcWCzF7z2YUEpvOoCQFj0DoTFvjX9IuybBYmxUdOO1GBIASjsTEAOCLOJQtPS10_-pTo-Pj29cawiP4yXgPawhWgENfavuwe9WajbOJdk82xkMox-8h-8u8J3WN4byuzb9pq3lQw=w2038-h1530-no?authuser=3" rel="gallery_cktuv4wa100211ojxi5n6fg8p" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="https://lh3.googleusercontent.com/pw/AM-JKLVcZMv8Y84R_6NNJRIcWCzF7z2YUEpvOoCQFj0DoTFvjX9IuybBYmxUdOO1GBIASjsTEAOCLOJQtPS10_-pTo-Pj29cawiP4yXgPawhWgENfavuwe9WajbOJdk82xkMox-8h-8u8J3WN4byuzb9pq3lQw=w2038-h1530-no?authuser=3" itemprop="contentUrl">
              </a>
            
          

          
          </div>
        </div>
      

      
        <h1 id="DVC"><a href="#DVC" class="headerlink" title="DVC"></a>DVC</h1><p><a href="https://dvc.org/" target="_blank" rel="noopener">DVC</a> is meaning of <strong>Data Version Control</strong>.</p>
<ul>
<li><a href="https://github.com/iterative/dvc" target="_blank" rel="noopener">GitHub</a></li>
</ul>
<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>We usually used Git to control code versions, but we knew that it was not good for controling large files or non-code documents.</p>
<p>Also, suppose if we add one large file by git and push to registry such as Github, there are some potential issues inside actually. As we know, usually deep learning or mahcine learning developers / researhers request to do a lot of trainings based on many verious experiments, so we need to find a proper way to maintain and manage those models.</p>
<p>First of all, it will highly increase <code>.git</code> folder size ; for example, if your whole files size are 1GB, it will have another 1GB in the <code>.git</code> folder. Hence, it will account for 2GB. </p>
<p>Second, it will take too much time on git clone repository. </p>
<p>Of course, DVC not only can do this kinds of things, but also implement the DL/ML pipeline things.</p>
<p>It provides a lot of functionality inside if you are interested in it, you can take a look its website.</p>
<p>In this article, I only showcased how to easily use DVC to control the models (DL/ML); in other word, control large files or put large files in the git folder.</p>
<p>Here is a simple and main workflow for DVC below:</p>
<p><img src="https://dvc.org/img/flow.gif" alt="Graph from official website."></p>
<p>The simplest critical concept for DVC workflow is that we use our “files” to exchange one “document” or you can say a “receipt”, and then DVC will put (store) your files to remote place, where can be in the local (in your PC somewhere) or remote servers or cloud drive, etc. Hence, we use <strong>git</strong> control this “receipt” to achieve data version controlled.</p>
<p>I can separate the parts for using DVC. If you can nail it these points, there is no problem to use it smoothly.</p>
<ol>
<li>Set up the <code>config</code> file in the <code>.dvc</code> folder.</li>
<li>Find a remote place such as local place (same device), remote server, or cloud drive (e.g., S3, AWS, etc.) </li>
<li>Remember the steps for usage.</li>
</ol>
<p>To be honest, the second point is the most difficult part if you do not have a cloud drive to store your files.</p>
<p>In my case, I was stored the data in our server via <strong>ssh</strong> in the end. Hence, if you have an account such as S3, then you can use that way. </p>
<hr>
<h1 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h1><h2 id="Step"><a href="#Step" class="headerlink" title="Step:"></a>Step:</h2><p><em>Do it in the directory which includes <code>.git</code> folder.</em></p>
<p>First, if this folder hasn’t been controlled by dvc before, you need to do once in the beginning.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dvc init</span><br></pre></td></tr></table></figure></p>
<p>Second, let’s add the files that we wanna store in the remote place.<br>When we <code>dvc add</code> one file, it will automatically generate one <code>.dvc</code> file give you. In addition, it will also automatically add your original file into <code>.gitignore</code> file to avoid being controlled by <strong>git</strong>.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">## Add file</span><br><span class="line">dvc add test</span><br><span class="line">git add test.dvc</span><br><span class="line">git commit -m &quot;Add raw data&quot;</span><br></pre></td></tr></table></figure></p>
<p>Let’s set up the config file in the first time.<br>Basically we need to add the remote side such as your personal server. We have to make sure dvc which can connect to there!! So you can test it by yourself first. For instance, we can use ssh to access your server to see whether there is a denied issue or not.</p>
<p>Official website provided a lot of ways that you guys can find the commands on there.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">### Add the remote source </span><br><span class="line"># For now, we only use local folder.</span><br><span class="line">dvc remote add -d myremote /tmp/dvcstore</span><br><span class="line">### If you use webhdfs </span><br><span class="line">dvc remote add -d myremote webhdfs://10.1.2.84:9870/tmp/webhdfs</span><br><span class="line"></span><br><span class="line"># check the information</span><br><span class="line">cat .dvc/config</span><br></pre></td></tr></table></figure></p>
<p>After we finish the setup config file, let’s push the file to remote side. Next, let’s git add this <code>.dvc</code> file and git commit &amp; git push as usual.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># Push the test folder to dvc </span><br><span class="line">dvc push </span><br><span class="line"></span><br><span class="line">### Add &quot;test&quot; folder into .gitignore</span><br><span class="line">git add .dvc/configsolomon</span><br><span class="line">git commit -m &quot;Configure remote storage&quot;</span><br><span class="line">git push</span><br></pre></td></tr></table></figure>
<p>If you wanna pull the models or files or updates, use it:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dvc pull</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Setup-WebHDFS-Part-Failure"><a href="#Setup-WebHDFS-Part-Failure" class="headerlink" title="Setup WebHDFS Part [Failure]"></a>Setup WebHDFS Part [Failure]</h1><p>Sorry I am not really familiar wiht using HDFS that I still failed in this way. I will update it if I have succeeded to use it.</p>
<p>Reference:</p>
<ol>
<li><a href="https://hub.docker.com/r/sequenceiq/hadoop-docker/" target="_blank" rel="noopener">hub.docker-hadoop-docker</a></li>
<li><a href="https://blog.csdn.net/qq_45083975/article/details/106137674" target="_blank" rel="noopener">Hadoop REST API – WebHDFS使用详解</a></li>
<li><p><a href="http://paulfun.net/wordpress/?p=307" target="_blank" rel="noopener">DOCKER的HADOOP一鍵啟動之旅</a><br> Use Docker to start HDFS: </p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run -d --name=hadoop-dev-server \</span><br><span class="line">    -p 8020:8020 \</span><br><span class="line">    -p 8030:8030 \</span><br><span class="line">    -p 8040:8040 \</span><br><span class="line">    -p 8042:8042 \</span><br><span class="line">    -p 8088:8088 \</span><br><span class="line">    -p 19888:19888 \</span><br><span class="line">    -p 49707:49707 \</span><br><span class="line">    -p 50010:50010 \</span><br><span class="line">    -p 50020:50020 \</span><br><span class="line">    -p 50070:50070 \</span><br><span class="line">    -p 50075:50075 \</span><br><span class="line">    -p 50090:50090 \</span><br><span class="line">    -p 9000:9000 \</span><br><span class="line">    762e8eefc162 /etc/bootstrap.sh -d</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://github.com/big-data-europe/docker-hadoop" target="_blank" rel="noopener">big-data-europe / docker-hadoop</a></p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="Commands"><a href="#Commands" class="headerlink" title="Commands"></a>Commands</h2><ul>
<li><p>Check the status:</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -i http://localhost:50070/webhdfs/v1/tmp\?user.name\=istvan\&amp;op\=GETFILESTATUS</span><br></pre></td></tr></table></figure>
</li>
<li><p>Create a folder at the <code>/tmp/webhdfs</code></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -i -X PUT http://localhost:50070/webhdfs/v1/tmp/webhdfs\?user.name\=istvan\&amp;op\=MKDIRS</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h1 id="Via-SSH-Part-Success"><a href="#Via-SSH-Part-Success" class="headerlink" title="Via SSH Part [Success]"></a>Via SSH Part [Success]</h1><p>Reference: </p>
<ol>
<li><a href="https://discuss.dvc.org/t/how-do-i-use-dvc-with-ssh-remote/279/2" target="_blank" rel="noopener">How do I use DVC with SSH remote</a></li>
</ol>
<p>SUPPOSE : </p>
<blockquote>
<p>hostname/ip: 10.1.2.30<br>user: Chieh<br>password: 123456789<br>port: 22</p>
</blockquote>
<p>Let’s add SSH remote.</p>
<p>I wanna put it in my remote server at <code>/home/user/tmp/</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dvc remote add --default ssh-storage ssh://10.1.2.30/home/user/tmp/</span><br><span class="line">dvc remote modify ssh-storage user Chieh</span><br><span class="line">dvc remote modify ssh-storage port 22</span><br><span class="line">dvc remote modify --local ssh-storage password 123456789</span><br></pre></td></tr></table></figure></p>
<p>If you dont wanna record any information into <code>.dvc/config</code>, then you can use <code>--local</code> option.<br>Otherwise, it will be added into the git control.</p>
<hr>
<h1 id="How-to-add-new-files"><a href="#How-to-add-new-files" class="headerlink" title="How to add new files?"></a>How to add new files?</h1><p>When we change something new files in the tracked dvc folder, how can we add this new files into dvc?</p>
<p>For example, suppose I have a tmp folder, there is one <code>index</code> file inside. </p>
<p><strong>Before</strong>:<br>└── tmp<br>    └── index</p>
<p>After we <code>dvc add tmp</code>, it will generate a file as <code>tmp.dvc</code>.<br>And I add one document, <code>confusion.json</code>, into the tmp folder like below:</p>
<p><strong>After</strong>:<br>└── tmp<br>    ├── index<br>    └── confusion.json</p>
<p>We can use <code>dvc add tmp</code> again, then it will update the tmp.dvc again.<br>Dont forget to <code>git commit</code> this <code>tmp.dvc</code> file and <code>dvc push</code>.</p>
<p>We use <code>tmp.dvc</code> to control the files; hence, if you wanna get one files from specific commit, you can <code>git checkout (specific commit)</code> back to that one commit, and remove the original tmp folder and dvc pull the files from server.</p>
<p>Step:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">dvc unprotect tmp</span><br><span class="line">dvc add tmp</span><br><span class="line"></span><br><span class="line"># Let&apos;s push to server</span><br><span class="line">dvc push</span><br><span class="line"></span><br><span class="line"># It will also update the .dvc file, so we need to git add it to do git control again.</span><br><span class="line">git add tmp.dvc</span><br><span class="line"></span><br><span class="line"># Regularly git commit and push it to git server.</span><br><span class="line">git commit -m &quot;Update tmp.dvc file&quot;</span><br><span class="line">git push</span><br></pre></td></tr></table></figure></p>
<hr>
<h1 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h1><p>Here is a simple dockerfile to create a stored space that you can set up your remote side in here.</p>
<p><strong>Dockerfile:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">FROM ubuntu:latest</span><br><span class="line">RUN sed -i -e &apos;s/archive.ubuntu.com/free.nchc.org.tw/&apos; /etc/apt/sources.list</span><br><span class="line">RUN apt-get update &amp;&amp; apt-get install -y ssh openssh-server vim ca-certificates wget sudo</span><br><span class="line"></span><br><span class="line"># RUN mkdir /var/run/sshd</span><br><span class="line">RUN echo &apos;root:Root&apos; | chpasswd</span><br><span class="line">RUN sed -i &apos;s/#PermitRootLogin/PermitRootLogin/&apos; /etc/ssh/sshd_config</span><br><span class="line">RUN sed -i &apos;s/#PasswordAuthentication/PasswordAuthentication/&apos; /etc/ssh/sshd_config</span><br><span class="line">  </span><br><span class="line">EXPOSE 22</span><br><span class="line">ARG USER_ID=1000</span><br><span class="line">RUN useradd -m --no-log-init --system  --uid $&#123;USER_ID&#125; user -g sudo</span><br><span class="line">RUN echo &apos;user:user&apos; | sudo /usr/sbin/chpasswd</span><br><span class="line">RUN echo &apos;%sudo ALL=(ALL) NOPASSWD:ALL&apos; &gt;&gt; /etc/sudoers</span><br><span class="line"># ENTRYPOINT sudo service ssh restart </span><br><span class="line">WORKDIR /home/user</span><br><span class="line">USER $USER_NAME</span><br><span class="line">RUN chmod 700 /home/user</span><br><span class="line">CMD [ &quot;bash&quot; ]</span><br></pre></td></tr></table></figure>
<p><strong>Build image:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker build -t dvc:0.1 .</span><br><span class="line">docker run --rm -ti -p 8787:22 dvc:0.1 bash</span><br></pre></td></tr></table></figure></p>
<hr>
<h1 id="Requirements"><a href="#Requirements" class="headerlink" title="Requirements"></a>Requirements</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install dvc</span><br></pre></td></tr></table></figure>
<p>If you use WebHDFS, you need to install this requirement.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip3 install &apos;dvc[webhdfs]&apos;</span><br><span class="line">or </span><br><span class="line">pip3 install &apos;dvc[ssh]&apos;</span><br></pre></td></tr></table></figure></p>
<p>Or you can use <code>dvc[all]</code> to install all packages.</p>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference:"></a>Reference:</h1><ul>
<li><a href="https://www.dazhuanlan.com/wdgann/topics/1008692" target="_blank" rel="noopener">DVC 介紹</a></li>
</ul>

      
    </div>
    
    
    

    

    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>Post author:</strong>
    Chieh
  </li>
  <li class="post-copyright-link">
    <strong>Post link:</strong>
    <a href="https://chiehpower.com/2021/09/01/DVC/" title="DVC">https://chiehpower.com/2021/09/01/DVC/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice: </strong>
    All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> unless stating additionally.
  </li>
</ul>

      </div>
    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2021/04/01/Forza350/" rel="next" title="My first motorcycle - Forza350">
                <i class="fa fa-chevron-left"></i> My first motorcycle - Forza350
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2021/09/22/repair-master2s/" rel="prev" title="Save my Master-2S">
                Save my Master-2S <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar1.gif" alt="Chieh">
            
              <p class="site-author-name" itemprop="name">Chieh</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">63</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">154</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/chiehpower" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:iloveberit@gmail.com" target="_blank" title="Gmail">
                      
                        <i class="fa fa-fw fa-envelope"></i>Gmail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://t.me/maplemadmessage" target="_blank" title="Telegram">
                      
                        <i class="fa fa-fw fa-telegram"></i>Telegram</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://my.flightradar24.com/chiehpower" target="_blank" title="Flightradar24">
                      
                        <i class="fa fa-fw fa-plane"></i>Flightradar24</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://sourcerer.io/chiehpower" target="_blank" title="Sourcerer">
                      
                        <i class="fa fa-fw fa-user-secret"></i>Sourcerer</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#DVC"><span class="nav-number">1.</span> <span class="nav-text">DVC</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Introduction"><span class="nav-number">2.</span> <span class="nav-text">Introduction</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Usage"><span class="nav-number">3.</span> <span class="nav-text">Usage</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Step"><span class="nav-number">3.1.</span> <span class="nav-text">Step:</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Setup-WebHDFS-Part-Failure"><span class="nav-number">4.</span> <span class="nav-text">Setup WebHDFS Part [Failure]</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Commands"><span class="nav-number">4.1.</span> <span class="nav-text">Commands</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Via-SSH-Part-Success"><span class="nav-number">5.</span> <span class="nav-text">Via SSH Part [Success]</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#How-to-add-new-files"><span class="nav-number">6.</span> <span class="nav-text">How to add new files?</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Docker"><span class="nav-number">7.</span> <span class="nav-text">Docker</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Requirements"><span class="nav-number">8.</span> <span class="nav-text">Requirements</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Reference"><span class="nav-number">9.</span> <span class="nav-text">Reference:</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Chieh</span>

  
</div>






  <div class="theme-info">
  Theme
  </div>




        
<div class="busuanzi-count">

  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      訪客數
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      訪問量
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  

    
      <script id="dsq-count-scr" src="https://https-chiehpower-github-io.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'https://chiehpower.com/2021/09/01/DVC/';
          this.page.identifier = '2021/09/01/DVC/';
          this.page.title = 'DVC';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://https-chiehpower-github-io.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	





  














  





  

  

  

  
  

  

  

  

</body>
</html>
